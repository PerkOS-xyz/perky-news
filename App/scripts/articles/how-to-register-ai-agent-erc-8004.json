{
  "slug": "how-to-register-ai-agent-erc-8004",
  "title": "How to Register Your AI Agent with ERC-8004",
  "category": "erc-8004",
  "tags": ["ERC-8004", "Tutorial", "Registration", "AI Agents", "Smart Contracts", "How-To"],
  "author": "Perky News Team",
  "excerpt": "A step-by-step guide to registering your AI agent on Ethereum using ERC-8004. Learn how to set up your agent's identity, prepare metadata, and start building on-chain reputation.",
  "content": "# How to Register Your AI Agent with ERC-8004\n\nYou've heard about ERC-8004 and understand why on-chain identity matters for AI agents. Now it's time for the practical part: **actually registering your agent**. This guide walks you through the entire process, from generating keys to earning your first attestations.\n\n## Prerequisites\n\nBefore we start, make sure you have:\n\n- **An Ethereum wallet** with some ETH for gas fees\n- **Node.js 18+** installed on your machine\n- **An AI agent** (or at least the concept of one you're building)\n- **Basic familiarity** with Ethereum transactions\n\nDon't worry if you're not a Solidity expert—you won't need to write any smart contracts. We'll interact with the existing ERC-8004 registry.\n\n## Step 1: Generate Your Agent's Keys\n\nEvery AI agent needs its own Ethereum address. This address becomes the agent's permanent identity, so we'll generate a fresh keypair specifically for the agent.\n\n**Why a separate address?** Keeping your agent's identity separate from your personal wallet provides better security and clearer separation of concerns. The agent address is solely for identity; your operator address handles registration and control.\n\nUsing ethers.js:\n\n```javascript\nimport { Wallet } from 'ethers';\n\n// Generate a new random wallet for the agent\nconst agentWallet = Wallet.createRandom();\n\nconsole.log('Agent Address:', agentWallet.address);\nconsole.log('Private Key:', agentWallet.privateKey);\n\n// IMPORTANT: Store the private key securely!\n// Your agent will need this to sign transactions\n```\n\n**Security Note**: The agent's private key should be stored securely (environment variables, secrets manager, hardware wallet for high-value agents). Never commit it to version control!\n\n## Step 2: Prepare Your Agent Metadata\n\nERC-8004 stores minimal data on-chain to keep gas costs low. Detailed information about your agent lives off-chain, referenced by a URI. This metadata follows a standard schema.\n\nCreate a JSON file describing your agent:\n\n```json\n{\n  \"name\": \"TradingBot Alpha\",\n  \"description\": \"An autonomous trading agent specialized in DEX arbitrage opportunities across Ethereum L2s.\",\n  \"version\": \"1.0.0\",\n  \"operator\": {\n    \"name\": \"Acme AI Labs\",\n    \"website\": \"https://acmeai.example\",\n    \"contact\": \"agents@acmeai.example\"\n  },\n  \"capabilities\": [\n    \"defi-trading\",\n    \"cross-chain-bridging\",\n    \"gas-optimization\"\n  ],\n  \"protocols\": [\n    \"uniswap-v3\",\n    \"aave-v3\",\n    \"across-bridge\"\n  ],\n  \"security\": {\n    \"audited\": false,\n    \"bugBounty\": null,\n    \"sourceCode\": \"https://github.com/acmeai/tradingbot-alpha\"\n  },\n  \"compliance\": {\n    \"jurisdictions\": [\"US\", \"EU\"],\n    \"restrictions\": [\"No sanctioned addresses\"]\n  },\n  \"image\": \"ipfs://Qm...\"\n}\n```\n\nThis metadata helps other protocols and users understand what your agent does and who's behind it.\n\n## Step 3: Upload Metadata to IPFS\n\nThe metadata needs to be stored somewhere permanent and content-addressable. IPFS is the standard choice.\n\nUsing Pinata (popular IPFS pinning service):\n\n```javascript\nimport axios from 'axios';\n\nconst metadata = {\n  // ... your metadata object from above\n};\n\nconst response = await axios.post(\n  'https://api.pinata.cloud/pinning/pinJSONToIPFS',\n  metadata,\n  {\n    headers: {\n      'Authorization': `Bearer ${PINATA_JWT}`,\n      'Content-Type': 'application/json'\n    }\n  }\n);\n\nconst metadataURI = `ipfs://${response.data.IpfsHash}`;\nconsole.log('Metadata URI:', metadataURI);\n```\n\nAlternatively, you can use:\n- **web3.storage** (free IPFS/Filecoin storage)\n- **Arweave** (permanent storage, one-time payment)\n- **NFT.storage** (free for NFT-related data)\n\n## Step 4: Register on the ERC-8004 Registry\n\nNow for the main event: calling the registration function on the ERC-8004 registry contract.\n\n```javascript\nimport { ethers } from 'ethers';\n\n// Connect to Ethereum (mainnet or testnet)\nconst provider = new ethers.JsonRpcProvider(RPC_URL);\nconst operatorWallet = new ethers.Wallet(OPERATOR_PRIVATE_KEY, provider);\n\n// ERC-8004 Registry contract\nconst REGISTRY_ADDRESS = '0x...'; // Official registry address\nconst REGISTRY_ABI = [\n  'function register(address agent, string memory metadataURI) external payable',\n  'function registrationFee() external view returns (uint256)',\n  'event AgentRegistered(address indexed agent, address indexed operator, string metadataURI)'\n];\n\nconst registry = new ethers.Contract(REGISTRY_ADDRESS, REGISTRY_ABI, operatorWallet);\n\n// Check registration fee\nconst fee = await registry.registrationFee();\nconsole.log('Registration fee:', ethers.formatEther(fee), 'ETH');\n\n// Register the agent\nconst tx = await registry.register(\n  agentWallet.address,  // The agent's address\n  metadataURI,          // IPFS URI from step 3\n  { value: fee }        // Pay registration fee\n);\n\nconsole.log('Transaction submitted:', tx.hash);\nconst receipt = await tx.wait();\nconsole.log('Agent registered! Block:', receipt.blockNumber);\n```\n\nOnce the transaction confirms, your agent officially exists on the ERC-8004 registry.\n\n## Step 5: Verify Registration\n\nLet's confirm everything worked:\n\n```javascript\nconst REGISTRY_VIEW_ABI = [\n  'function isRegistered(address agent) external view returns (bool)',\n  'function getAgent(address agent) external view returns (tuple(address operator, string metadataURI, uint256 registeredAt, uint8 status))'\n];\n\nconst registryRead = new ethers.Contract(REGISTRY_ADDRESS, REGISTRY_VIEW_ABI, provider);\n\n// Check registration status\nconst isRegistered = await registryRead.isRegistered(agentWallet.address);\nconsole.log('Is registered:', isRegistered); // Should be true\n\n// Get full agent info\nconst agentInfo = await registryRead.getAgent(agentWallet.address);\nconsole.log('Agent info:', {\n  operator: agentInfo.operator,\n  metadataURI: agentInfo.metadataURI,\n  registeredAt: new Date(Number(agentInfo.registeredAt) * 1000),\n  status: agentInfo.status // 0 = Active\n});\n```\n\n## Step 6: Set Up Your Agent to Use Its Identity\n\nNow that your agent is registered, configure it to sign transactions with its identity:\n\n```javascript\n// In your agent's code\nconst agentSigner = new ethers.Wallet(AGENT_PRIVATE_KEY, provider);\n\n// When interacting with ERC-8004 aware protocols,\n// use the agent's wallet to prove identity\nasync function executeWithIdentity(targetContract, functionData) {\n  // The agent signs and sends the transaction\n  // Receiving protocol can verify agent's ERC-8004 registration\n  const tx = await agentSigner.sendTransaction({\n    to: targetContract,\n    data: functionData\n  });\n  return tx;\n}\n```\n\n## Step 7: Earn Attestations\n\nAn identity without reputation is just an address. To build trust, your agent needs attestations from respected parties.\n\n### Self-Attestation\nStart by creating attestations about your own agent:\n\n```javascript\n// Claim your agent's capabilities\nconst attestation = {\n  subject: agentWallet.address,\n  type: 'capability',\n  data: {\n    capabilities: ['defi-trading', 'gas-optimization'],\n    maxTransactionSize: '10 ETH',\n    operatingSince: '2025-01-01'\n  },\n  issuedAt: Date.now()\n};\n\n// Sign with operator wallet (EIP-712)\nconst signature = await operatorWallet.signTypedData(\n  EIP712_DOMAIN,\n  ATTESTATION_TYPES,\n  attestation\n);\n```\n\n### Request Protocol Attestations\nAs your agent interacts with protocols, request attestations:\n\n```javascript\n// Example: After completing trades on a DEX\n// The DEX can attest to your agent's track record\nconst dexAttestation = {\n  subject: agentWallet.address,\n  type: 'behavior',\n  issuer: '0xDEX_ADDRESS',\n  data: {\n    totalTrades: 150,\n    successRate: 0.99,\n    totalVolume: '500 ETH',\n    period: '2025-Q1'\n  }\n};\n```\n\n### Join Attestation Networks\nSome organizations provide attestation services:\n- **Security auditors**: Attest code safety\n- **Compliance providers**: Attest regulatory adherence\n- **Reputation networks**: Aggregate and score attestations\n\n## Step 8: Keep Your Agent Updated\n\nAgent identity is living—update metadata as your agent evolves:\n\n```javascript\nconst UPDATE_ABI = [\n  'function updateMetadata(address agent, string memory newURI) external'\n];\n\nconst registryWrite = new ethers.Contract(REGISTRY_ADDRESS, UPDATE_ABI, operatorWallet);\n\n// Upload new metadata to IPFS first\nconst newMetadataURI = 'ipfs://QmNewHash...';\n\n// Update on-chain reference\nawait registryWrite.updateMetadata(agentWallet.address, newMetadataURI);\n```\n\n## Troubleshooting Common Issues\n\n**\"Agent already registered\"**: Each address can only be registered once. If you need a fresh start, use a new agent address.\n\n**\"Insufficient payment\"**: Make sure you're sending the correct registration fee. Query `registrationFee()` to get the current amount.\n\n**\"Unauthorized\"**: Only the operator who registered an agent can update it. Make sure you're using the correct wallet.\n\n**\"Metadata not found\"**: Verify your IPFS hash is pinned and accessible. Use a public gateway to test.\n\n## Best Practices\n\n1. **Use a fresh address** for each agent—don't reuse personal wallets\n2. **Document thoroughly** in metadata—it builds trust\n3. **Start small** with limited permissions, then expand as reputation grows\n4. **Monitor attestations** and address any negative feedback quickly\n5. **Keep operator keys secure**—they control your agent's identity\n\n## Conclusion\n\nRegistering your AI agent with ERC-8004 is straightforward: generate keys, prepare metadata, upload to IPFS, and call the registry. The real work begins after registration—building reputation through positive interactions and accumulating attestations.\n\nYour agent now has a verifiable on-chain identity. It can prove who it is, who operates it, and build a track record that follows it across the entire Ethereum ecosystem.\n\nWelcome to the era of trustless AI agents.\n\n---\n\n*Questions about registration? Join the ERC-8004 community Discord for support.*"
}
